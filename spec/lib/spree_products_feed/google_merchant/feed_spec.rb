require 'spec_helper'

describe SpreeProductsFeed::GoogleMerchant::Feed do
  let(:variants) { } # product scope
  let(:feed) {
    SpreeProductsFeed::GoogleMerchant::Feed.new(
      variants,
      {
        currency: Spree::Config[:currency],
        country: Spree::Country.find(Spree::Config[:default_country_id]),
        title: 'Google Merchant feed',
        description: 'Google Merchant feed generated by Spree',
        link: root_url,
        google_category: 'Software > Digital Goods & Currency'
      }
    )
  }

  before do
    reset_spree_preferences do |config|
      config.default_country_id = create(:country).id
      config.currency = 'USD'
    end
  end
end
